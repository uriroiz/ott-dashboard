# דשבורד נתוני OTT - איגוד הכדורסל הישראלי

דשבורד React מתקדם להצגת נתוני צפייה ב-OTT עבור ליגות הכדורסל הישראליות.

## תכונות

- ✅ העלאת קובץ Excel חודשי עם נתוני צפייה
- 🏀 **טאבים לכל ליגה** - הפרדה מלאה בין ליגות עם יכולת מעבר ביניהן
- 📊 **תרשימים חכמים** - מוצגים רק בטאב "כל הליגות"
- 📈 **4 טבלאות מפורטות** - עם כל הקבוצות (לא רק 10)
- 🔄 **מיון טבלאות** - כל הכותרות ניתנות ללחיצה למיון
- 🏆 **משחקים נצפים** - 30 המשחקים הפופולריים (10 בליגה בודדת)
- 🎯 זיהוי אוטומטי של 6 ליגות כדורסל
- 📌 **ללא דופליקציה באירועים** - כל משחק נספר פעם אחת
- 💯 **ממוצע צפיות פר אירוע** - מטריקה מדויקת לביצועי המשחקים
- 🎨 עיצוב מודרני ומותאם לעברית (RTL)
- 📱 Responsive - מותאם למובייל וטאבלט

## 🚀 שימוש

### שני מצבים:

#### 1️⃣ **מצב פיתוח** (מקומי - עם העלאת Excel)
```bash
npm run dev
```
→ פותח דפדפן עם אפשרות להעלות Excel

#### 2️⃣ **מצב ייצור** (GitHub Pages - נתונים מ-JSON)
```bash
npm run build
```
→ בונה גרסה סטטית עם נתונים קבועים

---

## 📘 העלאה ל-GitHub Pages

**רוצה להציג את הדשבורד ללקוחות באינטרנט?**

קרא את המדריך המהיר: **[GITHUB_SETUP.md](./GITHUB_SETUP.md)**

### תהליך מהיר:
```bash
# 1. המר Excel ל-JSON
npm run excel-to-json your-data.xlsx public/data/ott-data.json

# 2. צור קבצי .env (ראה GITHUB_SETUP.md)

# 3. העלה ל-GitHub
git init
git add .
git commit -m "Initial commit"
git remote add origin https://github.com/USERNAME/REPO.git
git push -u origin main

# 4. הפעל GitHub Pages (Settings → Pages → GitHub Actions)
```

**תוצאה:** `https://USERNAME.github.io/REPO/` 🎉

מדריכים מפורטים:
- 📘 **[GITHUB_SETUP.md](./GITHUB_SETUP.md)** - מדריך מהיר (5 דקות)
- 📖 **[DEPLOYMENT.md](./DEPLOYMENT.md)** - מדריך מפורט עם פתרון בעיות

---

## ⚙️ התקנה (פיתוח מקומי)

### דרישות מקדימות

- Node.js (גרסה 16 ומעלה)
- npm או yarn

### התקנת התלויות

```bash
cd ott-dashboard
npm install
```

## הפעלה

### מצב פיתוח (Development)

```bash
npm run dev
```

הדשבורד יפתח אוטומטית בדפדפן בכתובת: `http://localhost:3000`

### בניית גרסת ייצור (Production Build)

```bash
npm run build
```

הקבצים המובנים יישמרו בתיקייה `dist/`

### תצוגה מקדימה של גרסת ייצור

```bash
npm run preview
```

## מבנה הקובץ Excel הנדרש

הקובץ Excel חייב להכיל את העמודות הבאות:

| שם העמודה | תיאור |
|-----------|-------|
| `eventname` | שם האירוע (חובה - משמש לזיהוי הליגה) |
| `Event Date` | תאריך האירוע |
| `HomeTeam` | קבוצת בית |
| `AwayTeam` | קבוצת חוץ |
| `Views` | מספר צפיות |
| `unique users` | משתמשים ייחודיים |
| `Playtime Hours` | שעות צפייה |
| `Production Hours` | שעות הפקה |

## ליגות נתמכות

הדשבורד מזהה אוטומטית את הליגות הבאות:

1. **ליגת אתנה ווינר** - ליגת העל לגברים
2. **ליגה לאומית Winner** - ליגה לאומית לגברים
3. **הליגה לנערים א לאומית** - נוער בנים
4. **ליגת מקדונלד'ס לנוער** - נוער
5. **הליגה הלאומית לנשים** - נשים
6. **הליגה לנערות א על** - נערות

## מה מוצג בדשבורד?

### טאבים - הפרדה בין ליגות

- **כל הליגות** - תצוגה משולבת של כל הנתונים + תרשימים
- **טאב לכל ליגה** - תצוגה מסוננת לליגה ספציפית (ללא תרשימים)

### תרשימים (רק בטאב "כל הליגות")

1. **צפיות ומשתמשים לפי ליגה** - השוואה בין הליגות
2. **שעות צפייה לפי ליגה** - סך שעות הצפייה
3. **ממוצע צפיות למשחק** - מטריקה מדויקת לפופולריות המשחקים

**הערה:** התרשימים מוצגים רק כשנמצאים בטאב "כל הליגות". בטאבים של ליגות בודדות - רק טבלאות.

### טבלאות (כולן ניתנות למיון! 🔄)

1. **סיכום לפי ליגה** - נתונים מצטברים לכל ליגה (8 עמודות)
   - לחץ על כותרת למיון
   - אירועים, צפיות, משתמשים, שעות צפייה
   - ממוצעים למשחק

2. **משחקים נצפים ביותר** 🆕 (30 / 10 לפי טאב)
   - 30 משחקים בטאב "כל הליגות"
   - 10 משחקים בטאב ליגה בודדת
   - תאריך, ליגה, קבוצות, צפיות, משתמשים, שעות
   - ניתן למיון לפי כל עמודה

3. **טבלה כללית - כל הקבוצות**
   - כל הקבוצות מכל הליגות (או מליגה נבחרת)
   - סך משחקים (בית + חוץ)
   - ניתן למיון לפי צפיות, משחקים, וכו'

4. **סיכום בית לפי קבוצה** (כל הקבוצות)
   - כל הקבוצות בליגה/ליגות
   - ניתן למיון לפי כל פרמטר

5. **סיכום חוץ לפי קבוצה** (כל הקבוצות)
   - כל הקבוצות בליגה/ליגות
   - ניתן למיון לפי כל פרמטר

**סימני מיון:**
- `⇅` - ניתן למיון (לחץ על הכותרת)
- `▲` - ממוין עולה (A→Z, 1→9)
- `▼` - ממוין יורד (Z→A, 9→1)

## מבנה הפרויקט

```
ott-dashboard/
├── index.html              # קובץ HTML ראשי
├── package.json            # תלויות והגדרות
├── vite.config.js          # הגדרות Vite + GitHub Pages
├── .github/
│   └── workflows/
│       └── deploy.yml      # GitHub Actions (דפלוי אוטומטי)
├── public/
│   └── data/
│       ├── example.json    # דוגמת נתונים
│       └── ott-data.json   # נתונים לייצור (לא נשמר ב-git)
├── scripts/
│   └── excel-to-json.js    # ממיר Excel → JSON
├── src/
│   ├── main.jsx           # Entry point
│   ├── App.jsx            # קומפוננטת הראש (2 מצבים)
│   ├── index.css          # עיצוב גלובלי
│   ├── components/        # קומפוננטות React
│   │   ├── FileUpload.jsx     # העלאת קבצים (רק בפיתוח)
│   │   ├── Charts.jsx         # תרשימים
│   │   ├── LeagueTable.jsx    # טבלת ליגות
│   │   ├── LeagueTabs.jsx     # טאבים (כל הליגות / ליגה בודדת)
│   │   ├── AllTeamsTable.jsx  # טבלה כללית
│   │   ├── TopGames.jsx       # משחקים נצפים ביותר
│   │   ├── TeamTables.jsx     # טבלאות קבוצות
│   │   └── Notes.jsx          # הערות
│   ├── hooks/
│   │   └── useSortableTable.js # מיון טבלאות
│   └── utils/             # כלי עזר
│       └── dataProcessor.js  # עיבוד נתונים + פרסור תאריכים
├── setup.bat              # התקנה ראשונית
├── start.bat              # הפעלה מקומית (פיתוח)
├── deploy.bat             # דפלוי ל-GitHub Pages
├── test-json.bat          # בדיקת JSON
└── תיעוד/
    ├── README.md              # מדריך ראשי (זה!)
    ├── GITHUB_SETUP.md        # מדריך GitHub מהיר
    ├── GITHUB_QUICKSTART.txt  # מדריך מינימלי (3 דקות)
    ├── DEPLOYMENT.md          # מדריך פריסה מפורט
    ├── QUICKSTART.md          # התחלה מקומית
    ├── EXCEL_TEMPLATE.md      # פורמט Excel
    └── CHANGELOG.md           # היסטוריית גרסאות
```

## התאמה אישית

### שינוי תאריך הסינון

לשינוי תאריך הסינון (כרגע: 31/10/2025), ערוך את הקובץ:
```javascript
// src/utils/dataProcessor.js
const cutoffDate = new Date('2025-10-31T23:59:59'); // שנה כאן
```

### הוספת ליגות נוספות

הוסף ליגות חדשות ב:
```javascript
// src/utils/dataProcessor.js
export const leaguePatterns = {
  'ליגה חדשה': ['דפוס 1', 'דפוס 2'],
  // ...
}
```

### שינוי צבעי התרשימים

ערוך את הצבעים ב:
```javascript
// src/components/Charts.jsx
backgroundColor: '#3b82f6' // שנה כאן
```

## טכנולוגיות

- **React 18** - ספריית UI
- **Vite** - Build tool מהיר
- **Chart.js + react-chartjs-2** - תרשימים
- **SheetJS (xlsx)** - קריאת קבצי Excel
- **CSS מותאם אישית** - עיצוב RTL

## פתרון בעיות

### הקובץ לא נטען

- ודא שהקובץ הוא בפורמט `.xlsx` או `.xls`
- בדוק שהעמודות נכונות (שמות באנגלית)
- ודא שיש נתונים בגיליון הראשון

### לא מוצגים נתונים

- בדוק שעמודת `eventname` מכילה את שמות הליגות הנכונים
- ודא שהתאריכים לא עוברים את 31/10/2025
- בדוק ב-Console של הדפדפן לשגיאות

### בעיות בהתקנה

```bash
# נקה את ה-cache
rm -rf node_modules package-lock.json
npm install
```

## שיפורים עתידיים

- [ ] בחירת טווח תאריכים דינמי
- [ ] ייצוא נתונים ל-PDF/Excel
- [ ] פילטרים נוספים (לפי ליגה, קבוצה)
- [ ] גרפים נוספים (Pie, Line)
- [ ] שמירת נתונים היסטוריים
- [ ] השוואה בין חודשים

## תמיכה

לשאלות או בעיות, צור קשר עם מפתח הדשבורד.

---

**גרסה:** 1.0.0  
**עודכן לאחרונה:** נובמבר 2025

